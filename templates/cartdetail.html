
{% extends "base.html" %}
{% load static %}
{% block t %}
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<link rel="stylesheet" href="{% static '/css/emptycart.css' %}">

{% endblock  %}

{% block content %}

<div class="container" style="margin-top: 8%;">
    
    {% if cart_items %}

 
<div class="shopping-cart">
 
  <div class="column-labels">
    <label class="product-image">Image</label>
    <label class="product-details">Product</label>
    <label class="product-price">Price</label>
    <label class="product-quantity">Quantity</label>
    <label class="product-removal">Remove</label>
    <label class="product-line-price">Total</label>
  </div>
  
  {% for b in cart_items %}
  <div class="product">
    <div class="product-image">
      <img src="{{b.product.productimage_set.first.image.url}}">
    </div>
    <div class="product-details">
      <div class="product-title">{{b.product.product.name}}</div>
      <p class="product-description">{{b.product.color}}</p>
    </div>
    <div class="product-price">{{b.product.price}}</div>
   
    <div class="product-quantity">
      <input type="number" data-product-id="{{ b.id }}" value="{{ b.quantity }}" min="1" max="{{ b.product.stock }}" >
    </div>

    <div class="product-removal">
      <a href="delete/{{b.product.id}}/">
      <button class="remove-product">remove
       
      </button></a>
    </div>
    <div class="product-line-price">{{b.total_product_price }}</div>
  </div>
  {% endfor %}

    
     
      <div class="container" style="display: flex; justify-content: flex-end; width: 100%;">
          <div class="r" style="align-items: end; width: 20%;">
      

                <div id="coupon-section">

                  
                  {% if cart.coupon %}
                  <p style="color: green;">Coupon applied <a id="remove-coupon-link" href="{% url 'removecoupon' %}" style="color: inherit; text-decoration: none;"><button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">Ã—</button></a> </p>
                  {% else %}
                      <form id="apply-coupon-form" method="post" action="{% url 'apply_coupon' %}">
                          {% csrf_token %}
                          <div class="input-group">
                              <input placeholder="Apply coupon" aria-describedby="button-addon1" class="form-control border-0 bg-light font-size-5" name="code" id="coupon-code-input">
                              <div class="input-group-append" style="color: rgb(60, 57, 57);">
                                  <button type="submit" class="btn">Apply</button>
                              </div>
                          </div>
                      </form>
                      <p id="coupon-message" style="color: red;"></p>
                  {% endif %}
              
              
            
              </div>
          </div>
      </div>
 
  
  <div class="totals">
    <div class="totals-item">
      <label>Subtotal</label>
      <div class="totals-value" id="cart-subtotal">{{total_price}}</div>
    </div>
    <div class="totals-item">
      <label>Coupon discount</label>
      <div class="totals-value" id="cart-coupon">-{{ cart.coupon.discount }}</div>
  </div>
    <div class="totals-item">
      <label>Shipping</label>
      <div class="totals-value" id="cart-shipping">Free</div>
    </div>
    <div class="totals-item totals-item-total">
      <label>Grand Total</label>
      <div class="totals-value" id="cart-total" name="total">{{total_price}}</div>
    </div>
  </div>
  <a href="{% url 'checkout' %}" >
      <button class="checkout" id="checkoutButton">Checkout</button>
    </a >

</div>
<br>
<br>
{% else %}
             


  
   <div class="col-md-12">
   
    
     <div class="card-header">

     </div>
     <div class="card-body cart">
         <div class="col-sm-12 empty-cart-cls text-center">
           <img src="https://i.imgur.com/dCdflKN.png" width="130" height="130" class="img-fluid mb-4 mr-3">
           <h3><strong>Your Cart is Empty</strong></h3>
           <h4>Add something to make me happy :</h4>
           <a href="{% url 'home' %}" class="btn btn-primary cart-btn-transform m-3" data-abc="true">continue shopping</a>
           
         
         </div>
     </div>

   <br>
   <br>
   
  
   </div>
  


                

                  {% endif %}

</div>

{% endblock %}
{% block jsss %}
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<script src="{% static '/js/custom.js' %}"></script>
<script src="{% static '/js/coupon.js' %}"></script>





{% endblock  %}